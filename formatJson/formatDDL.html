<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SQL DDL 格式化工具</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/js-beautify/1.14.0/beautify.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        textarea {
            width: 100%;
            height: 200px;
            font-family: Consolas, monaco, monospace;
            font-size: 14px;
            padding: 10px;
            margin: 10px 0;
            border: 1px solid #ccc;
            border-radius: 4px;
            resize: vertical;
        }
        button {
            padding: 10px 15px;
            font-size: 16px;
            cursor: pointer;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 4px;
            transition: background-color 0.3s;
        }
        button:hover {
            background-color: #45a049;
        }
        #formatted-output {
            background-color: #f4f4f4;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
            white-space: pre-wrap;
            word-wrap: break-word;
        }
    </style>
</head>
<body>
    <h1>SQL DDL 格式化工具</h1>
    <p>在下面的文本框中輸入 SQL DDL 語句，然後點擊「格式化」來查看格式化結果。</p>

    <textarea id="sql-input" placeholder="請在這裡輸入您的 SQL DDL 語句..."></textarea>
    <br>
    <button onclick="formatSQL()">格式化</button>

    <h2>格式化結果：</h2>
    <pre id="formatted-output"></pre>

    <script>
        function formatSQL() {
            var sqlInput = document.getElementById('sql-input').value;
            if (sqlInput.trim() === '') {
                alert('請輸入 SQL DDL 語句！');
                return;
            }

            // 使用 js-beautify 格式化 SQL
            var formattedSQL = js_beautify(sqlInput, { 
                indent_size: 2, 
                space_in_empty_paren: true 
            });

            // 強制每個欄位換行，這個正規表達式會處理 CREATE TABLE 的欄位定義部分
            formattedSQL = formattedSQL.replace(/,\s*/g, ',\n  ');

            // 顯示格式化結果
            document.getElementById('formatted-output').textContent = formattedSQL;
        }
    </script>
</body>
</html>
